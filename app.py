import streamlit as st

st.set_page_config(page_title="Simulador AMV", layout="centered")
st.title("üéì Simulador de Examen AMV - 11 Componentes")
st.write("Responde 5 preguntas del componente seleccionado. Al final obtendr√°s tu puntaje y la explicaci√≥n de cada respuesta.")

cuestionario = {
    "Regulaci√≥n": [
        {"preg": "¬øQu√© entidad regula el mercado de valores en Colombia?", "opciones": ["Banco de la Rep√∫blica", "Superfinanciera", "Ministerio de Hacienda", "DIAN"], "respuesta": "Superfinanciera", "explicacion": "La Superfinanciera regula y supervisa el mercado de valores colombiano."},
        {"preg": "¬øQu√© tipo de valores se negocian en el mercado p√∫blico colombiano?", "opciones": ["Solo acciones", "Bonos y derivados", "Varios: acciones, bonos, etc.", "Solo TES"], "respuesta": "Varios: acciones, bonos, etc.", "explicacion": "El mercado p√∫blico permite negociar distintos instrumentos como acciones, bonos, TES, entre otros."},
        {"preg": "¬øCu√°l es el objetivo del RNVE?", "opciones": ["Registrar fondos", "Registrar emisores y valores", "Registrar bancos", "Registrar clientes"], "respuesta": "Registrar emisores y valores", "explicacion": "El RNVE centraliza informaci√≥n relevante sobre emisores y los valores que colocan."},
        {"preg": "¬øQu√© operaci√≥n es del mercado secundario?", "opciones": ["Emisi√≥n de bonos", "OPA inicial", "Compra-venta entre inversionistas", "Emisi√≥n TES"], "respuesta": "Compra-venta entre inversionistas", "explicacion": "En el mercado secundario se transan valores ya emitidos entre inversionistas."},
        {"preg": "¬øQui√©n puede ser intermediario de valores?", "opciones": ["Cualquiera", "Solo bancos", "Entidades autorizadas por la Superfinanciera", "Personas naturales"], "respuesta": "Entidades autorizadas por la Superfinanciera", "explicacion": "Solo las entidades autorizadas pueden ejercer la intermediaci√≥n de valores legalmente."}
    ],
    "Autorregulaci√≥n": [
        {"preg": "¬øQu√© es la autorregulaci√≥n?", "opciones": ["Obligaci√≥n legal", "Mecanismo voluntario que complementa la regulaci√≥n estatal", "Intervenci√≥n estatal", "Impuesto al mercado"], "respuesta": "Mecanismo voluntario que complementa la regulaci√≥n estatal", "explicacion": "Es un sistema en el cual los actores del mercado establecen normas adicionales a las oficiales para garantizar mejores pr√°cticas."},
        {"preg": "¬øQui√©n supervisa a los autorreguladores?", "opciones": ["La DIAN", "Superfinanciera", "La bolsa", "Los clientes"], "respuesta": "Superfinanciera", "explicacion": "Aunque la autorregulaci√≥n es independiente, est√° sujeta a supervisi√≥n por la Superintendencia Financiera."},
        {"preg": "¬øQu√© funci√≥n tiene un c√≥digo de conducta?", "opciones": ["Norma jur√≠dica", "Gu√≠a √©tica profesional", "Ley tributaria", "Manual de usuario"], "respuesta": "Gu√≠a √©tica profesional", "explicacion": "Un c√≥digo de conducta establece principios y lineamientos √©ticos para los actores del mercado."},
        {"preg": "¬øQu√© promueve la autorregulaci√≥n?", "opciones": ["Menos supervisi√≥n", "Mayor transparencia y confianza", "Menos regulaci√≥n", "Exenci√≥n tributaria"], "respuesta": "Mayor transparencia y confianza", "explicacion": "Uno de los principales objetivos de la autorregulaci√≥n es mejorar la transparencia y la confianza del mercado."},
        {"preg": "¬øCu√°l es una entidad autorreguladora en Colombia?", "opciones": ["DIAN", "Banco de la Rep√∫blica", "AMV", "MinHacienda"], "respuesta": "AMV", "explicacion": "La Autorreguladora del Mercado de Valores (AMV) es una entidad autorreguladora reconocida en Colombia."}
    ],
    "√âtica e Integridad": [
        {"preg": "¬øQu√© es la √©tica profesional?", "opciones": ["Conjunto de leyes", "Reglas del empleador", "Principios que gu√≠an la conducta", "Normas de seguridad"], "respuesta": "Principios que gu√≠an la conducta", "explicacion": "La √©tica profesional se refiere a los principios morales que gu√≠an el comportamiento correcto en el ejercicio de una profesi√≥n."},
        {"preg": "¬øQu√© actitud debe tener un asesor financiero frente al conflicto de inter√©s?", "opciones": ["Ocultarlo", "Rechazarlo y comunicarlo", "Aprovecharlo", "Negociarlo con el cliente"], "respuesta": "Rechazarlo y comunicarlo", "explicacion": "El asesor debe evitar y reportar cualquier conflicto de inter√©s para proteger al cliente."},
        {"preg": "¬øQu√© conducta es contraria a la √©tica del mercado?", "opciones": ["Asesor√≠a imparcial", "Uso de informaci√≥n privilegiada", "Divulgaci√≥n de riesgos", "Cumplimiento normativo"], "respuesta": "Uso de informaci√≥n privilegiada", "explicacion": "Utilizar informaci√≥n privilegiada para obtener beneficios personales es anti√©tico y sancionable."},
        {"preg": "¬øQu√© debe promover un asesor financiero √©tico?", "opciones": ["Mayor rentabilidad personal", "Confianza y transparencia", "Productos de su empresa", "Cierre de ventas"], "respuesta": "Confianza y transparencia", "explicacion": "La transparencia genera confianza y fortalece la relaci√≥n con el cliente."},
        {"preg": "¬øQu√© debe hacer un asesor si no conoce un producto?", "opciones": ["Promoverlo igual", "Evitar hablar del tema", "Estudiarlo o referirlo", "Inventar una respuesta"], "respuesta": "Estudiarlo o referirlo", "explicacion": "Un asesor √©tico debe estar capacitado para asesorar o derivar al cliente a un experto."}
    ],
    "An√°lisis Econ√≥mico": [
        {"preg": "¬øQu√© representa un aumento del PIB?", "opciones": ["Desaceleraci√≥n", "Mayor producci√≥n de bienes y servicios", "Mayor inflaci√≥n", "Ca√≠da del empleo"], "respuesta": "Mayor producci√≥n de bienes y servicios", "explicacion": "El PIB mide el total de bienes y servicios producidos, por lo que si sube, la econom√≠a crece."},
        {"preg": "¬øQu√© entidad calcula el IPC en Colombia?", "opciones": ["Banco de la Rep√∫blica", "DANE", "Superfinanciera", "Ministerio de Hacienda"], "respuesta": "DANE", "explicacion": "El DANE es el encargado oficial de calcular el IPC."},
        {"preg": "¬øCu√°l es el efecto de una pol√≠tica monetaria expansiva?", "opciones": ["Sube tasas", "Reduce tasas", "Cierra mercados", "Aumenta d√©ficit"], "respuesta": "Reduce tasas", "explicacion": "Busca estimular la econom√≠a al hacer el cr√©dito m√°s barato."},
        {"preg": "¬øQu√© mide el IPC?", "opciones": ["Riesgo pa√≠s", "Inflaci√≥n", "Tipo de cambio", "Desempleo"], "respuesta": "Inflaci√≥n", "explicacion": "El IPC mide c√≥mo cambian los precios de una canasta b√°sica de bienes y servicios."},
        {"preg":"¬øQu√© es d√©ficit fiscal?","opciones":["M√°s ingresos que gastos","M√°s gastos que ingresos","Super√°vit","Reducir impuestos"],"respuesta":"M√°s gastos que ingresos","explicacion":"Significa que el Estado gasta m√°s de lo que recauda."}
    ],
    "Riesgos": [
        {"preg": "¬øQu√© riesgo representa una subida inesperada en tasas de inter√©s?", "opciones": ["Cr√©dito", "Mercado", "Operativo", "Reputacional"], "respuesta": "Mercado", "explicacion": "Este tipo de riesgo surge por cambios en tasas, precios o divisas."},
        {"preg": "¬øQu√© es riesgo de cr√©dito?", "opciones": ["Error operativo", "Impago del cliente", "Variaci√≥n de precios", "Problema legal"], "respuesta": "Impago del cliente", "explicacion": "Es el riesgo de que el deudor no cumpla con sus obligaciones."},
        {"preg": "¬øC√≥mo reducir riesgo mediante diversificaci√≥n?", "opciones": ["Concentrar inversiones", "Repositorio", "Portafolio diversificado", "Apalancarse"], "respuesta": "Portafolio diversificado", "explicacion": "Diversificar reduce la exposici√≥n a la falla de un solo activo."},
        {"preg": "¬øQu√© es riesgo operativo?", "opciones": ["Impago", "Hackeo", "Fraude o errores internos", "Cambio de tasas"], "respuesta": "Fraude o errores internos", "explicacion": "Incluye fallas tecnol√≥gicas, humanos o procesos internos."},
        {"preg": "¬øQu√© riesgo da√±a la imagen institucional?", "opciones": ["Mercado", "Liquidez", "Reputacional", "Legal"], "respuesta": "Reputacional", "explicacion": "Afecta c√≥mo el p√∫blico y clientes perciben a la entidad."}
    ],
    "Matem√°ticas Financieras": [
    {"preg": "¬øQu√© representa la tasa de inter√©s?", "opciones": ["Costo del dinero en el tiempo", "Costo del producto", "Costo del impuesto", "Valor presente neto"], "respuesta": "Costo del dinero en el tiempo", "explicacion": "La tasa de inter√©s mide cu√°nto se paga o gana por usar dinero en un periodo."},
    {"preg": "¬øQu√© es el valor presente?", "opciones": ["Valor que tendr√° en el futuro", "Valor actual de un flujo futuro", "Valor acumulado con inter√©s", "Costo del activo"], "respuesta": "Valor actual de un flujo futuro", "explicacion": "El valor presente permite conocer cu√°nto vale hoy un dinero que se recibir√° despu√©s."},
    {"preg": "¬øQu√© es un inter√©s compuesto?", "opciones": ["Inter√©s sobre capital inicial", "Inter√©s sobre inter√©s generado", "Inter√©s sobre cuota fija", "Sin capitalizaci√≥n"], "respuesta": "Inter√©s sobre inter√©s generado", "explicacion": "El inter√©s compuesto acumula intereses generados en periodos anteriores."},
    {"preg": "¬øCu√°l f√≥rmula se usa para valor futuro con inter√©s compuesto?", "opciones": ["VF = VP(1+it)", "VF = VP(1+i)^n", "VP = VF/(1+i)", "VF = i/n"], "respuesta": "VF = VP(1+i)^n", "explicacion": "Esa es la f√≥rmula cl√°sica del valor futuro compuesto."},
    {"preg": "¬øQu√© ocurre si la tasa nominal es 12% y capitaliza mensualmente?", "opciones": ["Tasa efectiva anual es 12%", "Tasa efectiva anual es mayor", "Tasa baja", "No cambia nada"], "respuesta": "Tasa efectiva anual es mayor", "explicacion": "La capitalizaci√≥n aumenta el valor efectivo de la tasa nominal."}
],
    "Renta Fija": [
    {"preg": "¬øQu√© es un bono?", "opciones": ["Acci√≥n de empresa", "Derecho a voto", "Instrumento de deuda", "T√≠tulo sin valor"], "respuesta": "Instrumento de deuda", "explicacion": "Es un t√≠tulo que representa una deuda que ser√° pagada en el futuro con intereses."},
    {"preg": "¬øQu√© es la tasa cup√≥n?", "opciones": ["Rentabilidad anual de una acci√≥n", "Pago peri√≥dico del bono", "Costo del bono", "Valor residual"], "respuesta": "Pago peri√≥dico del bono", "explicacion": "La tasa cup√≥n es el inter√©s que paga un bono peri√≥dicamente."},
    {"preg": "¬øQu√© afecta el precio de un bono en el mercado secundario?", "opciones": ["Tasa de inflaci√≥n", "Tasa de mercado", "PIB", "Emisi√≥n de acciones"], "respuesta": "Tasa de mercado", "explicacion": "Si sube la tasa del mercado, el precio del bono suele bajar, y viceversa."},
    {"preg": "¬øQu√© es la duraci√≥n de un bono?", "opciones": ["Vida √∫til", "Tiempo hasta el pago de cup√≥n", "Promedio ponderado del plazo de los flujos", "Tasa fija"], "respuesta": "Promedio ponderado del plazo de los flujos", "explicacion": "La duraci√≥n mide la sensibilidad del precio del bono ante cambios en tasas."},
    {"preg": "¬øQu√© riesgo tiene la renta fija?", "opciones": ["Ninguno", "Riesgo de cr√©dito y tasa de inter√©s", "Solo riesgo de mercado", "Riesgo operacional"], "respuesta": "Riesgo de cr√©dito y tasa de inter√©s", "explicacion": "Existe riesgo de impago y de que las tasas afecten el precio del bono."}
],
    "Renta Variable": [
    {"preg": "¬øQu√© instrumento representa la renta variable?", "opciones": ["Bono", "Acci√≥n", "CDT", "TES"], "respuesta": "Acci√≥n", "explicacion": "Las acciones no tienen una rentabilidad fija, por eso son renta variable."},
    {"preg": "¬øQu√© derecho otorgan las acciones ordinarias?", "opciones": ["Pago fijo", "Participar en utilidades y voto", "Redenci√≥n garantizada", "Tasa de inter√©s fija"], "respuesta": "Participar en utilidades y voto", "explicacion": "El accionista tiene derecho a recibir dividendos y a votar en asambleas."},
    {"preg": "¬øQu√© es el dividendo?", "opciones": ["Inter√©s por deuda", "Ganancia de capital", "Distribuci√≥n de utilidades", "Precio de venta"], "respuesta": "Distribuci√≥n de utilidades", "explicacion": "Es el pago que hace la empresa a los accionistas con sus utilidades."},
    {"preg": "¬øQu√© riesgo predomina en renta variable?", "opciones": ["Riesgo tasa", "Riesgo mercado", "Riesgo operativo", "Riesgo legal"], "respuesta": "Riesgo mercado", "explicacion": "Las acciones fluct√∫an mucho por cambios de mercado, confianza, noticias, etc."},
    {"preg": "¬øQu√© es la valorizaci√≥n de una acci√≥n?", "opciones": ["Ca√≠da en el precio", "Pago de intereses", "Aumento en su precio de mercado", "Reducci√≥n de tasa"], "respuesta": "Aumento en su precio de mercado", "explicacion": "Valorizaci√≥n significa que la acci√≥n vale m√°s que cuando se compr√≥."}
],
    "Derivados": [
    {"preg": "¬øQu√© es un derivado financiero?", "opciones": ["T√≠tulo de deuda", "Acci√≥n preferencial", "Instrumento cuyo valor depende de otro", "Cr√©dito bancario"], "respuesta": "Instrumento cuyo valor depende de otro", "explicacion": "Su valor deriva del precio de otro activo (subyacente)."},
    {"preg": "¬øCu√°l es un tipo de derivado?", "opciones": ["Bonos", "Forward", "Certificado de dep√≥sito", "TES"], "respuesta": "Forward", "explicacion": "Los Forward son contratos que fijan precio futuro de compra/venta."},
    {"preg": "¬øPara qu√© se usan los derivados?", "opciones": ["Evadir impuestos", "Asegurar precios o especular", "Reducir liquidez", "Comprar bonos"], "respuesta": "Asegurar precios o especular", "explicacion": "Pueden ser usados para cubrir riesgos o buscar rentabilidad."},
    {"preg": "¬øQu√© riesgo manejan los derivados?", "opciones": ["Riesgo clim√°tico", "Riesgo operacional", "Riesgo de contraparte y mercado", "Riesgo log√≠stico"], "respuesta": "Riesgo de contraparte y mercado", "explicacion": "Puede que la contraparte no cumpla o el mercado var√≠e."},
    {"preg": "¬øCu√°l es un mercado donde se negocian derivados en Colombia?", "opciones": ["Bolsa Nacional de Derivados", "BVC (Bolsa de Valores de Colombia)", "SIC", "RNVE"], "respuesta": "BVC (Bolsa de Valores de Colombia)", "explicacion": "La BVC tiene un sistema de negociaci√≥n de derivados estandarizados."}
],
    "Fondos de Pensiones": [
    {"preg": "¬øQu√© funci√≥n tienen los fondos de pensiones?", "opciones": ["Financiar EPS", "Administrar ahorro para retiro", "Pagar impuestos", "Intermediar valores"], "respuesta": "Administrar ahorro para retiro", "explicacion": "Su prop√≥sito principal es garantizar un ingreso al momento del retiro laboral."},
    {"preg": "¬øQu√© r√©gimen existe en Colombia?", "opciones": ["Solidario", "Privado", "P√∫blico y privado", "Gratuito"], "respuesta": "P√∫blico y privado", "explicacion": "Colombia tiene r√©gimen p√∫blico (Colpensiones) y privado (fondos AFP)."},
    {"preg": "¬øQu√© es la doble asesor√≠a?", "opciones": ["Dos pensiones", "Asesor√≠a para migrar entre reg√≠menes", "Asesor√≠a del empleador", "Dos asesores del mismo fondo"], "respuesta": "Asesor√≠a para migrar entre reg√≠menes", "explicacion": "Se debe dar asesor√≠a completa si alguien quiere cambiar entre fondo privado y p√∫blico."},
    {"preg": "¬øCu√°l es un objetivo del multifondos?", "opciones": ["Unificar rentabilidad", "Ofrecer diferentes perfiles de riesgo", "Eliminar aportes", "Limitar retiros"], "respuesta": "Ofrecer diferentes perfiles de riesgo", "explicacion": "Permite al afiliado elegir el fondo seg√∫n su edad y tolerancia al riesgo."},
    {"preg": "¬øQu√© entidad p√∫blica administra el fondo pensional?", "opciones": ["Bancolombia", "Superfinanciera", "Colpensiones", "MinHacienda"], "respuesta": "Colpensiones", "explicacion": "Colpensiones es el administrador p√∫blico del sistema pensional colombiano."}
],
    "Fondos de Inversi√≥n Colectiva": [
    {"preg": "¬øQu√© es un FIC?", "opciones": ["Cuenta de ahorros", "Portafolio colectivo administrado", "Acci√≥n preferente", "Bonos garantizados"], "respuesta": "Portafolio colectivo administrado", "explicacion": "Son veh√≠culos de inversi√≥n donde varios inversionistas aportan recursos gestionados profesionalmente."},
    {"preg": "¬øQui√©n administra los FIC?", "opciones": ["Superfinanciera", "Administradoras autorizadas", "Empresas", "Usuarios"], "respuesta": "Administradoras autorizadas", "explicacion": "Deben ser administradoras vigiladas por la Superfinanciera."},
    {"preg": "¬øQu√© documento describe el FIC?", "opciones": ["Pagar√©", "Reglamento del fondo", "Factura", "Acta de constituci√≥n"], "respuesta": "Reglamento del fondo", "explicacion": "All√≠ se especifica el tipo de inversiones, riesgos, comisiones, etc."},
    {"preg": "¬øQu√© ventaja tiene un FIC?", "opciones": ["Menor control", "Inversi√≥n especulativa", "Diversificaci√≥n y administraci√≥n profesional", "Riesgo ilimitado"], "respuesta": "Diversificaci√≥n y administraci√≥n profesional", "explicacion": "El inversionista accede a una cartera gestionada por expertos y con bajo riesgo individual."},
    {"preg": "¬øQu√© tipo de FIC puede existir?", "opciones": ["Solo renta fija", "Renta fija y variable", "Solo acciones", "Cr√©dito corporativo"], "respuesta": "Renta fija y variable", "explicacion": "Pueden invertir en distintos tipos de activos dependiendo del objetivo del fondo."}
],






}

componente = st.selectbox("üìò Elige un componente:", list(cuestionario.keys()))

if "preguntas_mostradas" not in st.session_state or st.session_state["componente_activo"] != componente:
    st.session_state["preguntas_mostradas"] = cuestionario[componente][:5]
    st.session_state["componente_activo"] = componente

preguntas = st.session_state["preguntas_mostradas"]
respuestas_usuario = []

st.write("---")
for i, pregunta in enumerate(preguntas):
    st.subheader(f"Pregunta {i+1}")
    st.write(pregunta["preg"])
    respuestas_usuario.append(st.radio("Opciones:", pregunta["opciones"], key=f"{componente}_{i}"))

st.write("---")
if st.button("üìä Ver resultados"):
    aciertos = sum(1 for i, pregunta in enumerate(preguntas) if respuestas_usuario[i] == pregunta["respuesta"])
    st.success(f"Obtuviste {aciertos}/5 respuestas correctas. Puntaje: {(aciertos/5)*100:.0f}%")
    st.write("### üß† Explicaciones:")
    for i, pregunta in enumerate(preguntas):
        st.markdown(f"**{i+1}. {pregunta['preg']}**")
        st.markdown(f"- ‚úÖ Respuesta correcta: {pregunta['respuesta']}")
        st.markdown(f"- üìò Explicaci√≥n: {pregunta['explicacion']}")
        st.write("")


